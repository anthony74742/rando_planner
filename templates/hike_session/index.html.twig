{% extends 'base.html.twig' %}

{% block title %}Mes sessions{% endblock %}

{% block body %}
    <div class="min-h-screen bg-gray-50">
        {{ include('_nav.html.twig') }}

        <div class="max-w-6xl mx-auto px-4 py-8">
            {# Bouton retour #}
            <div class="mb-6">
                <a href="{{ path('app_home') }}" class="inline-flex items-center text-gray-600 hover:text-green-600 transition">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </a>
            </div>

            {# En-t√™te #}
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Mes sessions</h1>
                    <p class="text-gray-600 mt-2">Consultez toutes vos sessions de randonn√©e</p>
                </div>
            </div>

            {# Messages flash #}
            {% for message in app.flashes('success') %}
                <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg mb-6">
                    {{ message }}
                </div>
            {% endfor %}

            {# Liste des sessions #}
            {% if hike_sessions|length > 0 %}
                <div class="space-y-4">
                    {% for hike_session in hike_sessions %}
                        <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition p-6">
                            <div class="flex items-start justify-between gap-4">
                                <div class="flex-1">
                                    {# Titre et randonn√©e #}
                                    <div class="mb-4">
                                        <h3 class="text-lg font-bold text-gray-900">{{ hike_session.hike.title }}</h3>
                                        <a href="{{ path('app_hike_show', {'id': hike_session.hike.id}) }}" class="text-sm text-green-600 hover:text-green-700">
                                            Voir la randonn√©e
                                        </a>
                                    </div>

                                    {# D√©tails de la session #}
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        <div class="flex items-start gap-2">
                                            <span class="text-xl">üìÖ</span>
                                            <div>
                                                <div class="text-xs text-gray-500">Date</div>
                                                <div class="font-medium text-gray-900">{{ hike_session.date|date('d/m/Y') }}</div>
                                                <div class="text-xs text-gray-500">√† {{ hike_session.date|date('H:i') }}</div>
                                            </div>
                                        </div>

                                        <div class="flex items-start gap-2">
                                            <span class="text-xl">üìç</span>
                                            <div>
                                                <div class="text-xs text-gray-500">Lieu</div>
                                                <div class="font-medium text-gray-900">{{ hike_session.hike.location }}</div>
                                            </div>
                                        </div>

                                        <div class="flex items-start gap-2">
                                            <span class="text-xl">üìè</span>
                                            <div>
                                                <div class="text-xs text-gray-500">Distance</div>
                                                <div class="font-medium text-gray-900">{{ hike_session.hike.distance }} km</div>
                                            </div>
                                        </div>

                                        <div class="flex items-start gap-2">
                                            <span class="text-xl">üìß</span>
                                            <div>
                                                <div class="text-xs text-gray-500">Invitations</div>
                                                <div class="font-medium text-gray-900">{{ hike_session.invitations|length }}</div>
                                            </div>
                                        </div>
                                    </div>

                                    {# Notes #}
                                    {% if hike_session.notes %}
                                        <div class="text-sm text-gray-600 mb-4 p-3 bg-gray-50 rounded border border-gray-200">
                                            <strong class="text-gray-900">Notes:</strong> {{ hike_session.notes }}
                                        </div>
                                    {% endif %}
                                </div>

                                {# Actions #}
                                <div class="flex flex-col gap-2">
                                    <a href="{{ path('app_hike_session_show', {'id': hike_session.id}) }}" class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition whitespace-nowrap">
                                        Voir d√©tails
                                    </a>
                                    <a href="{{ path('app_hike_session_edit', {'id': hike_session.id}) }}" class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition whitespace-nowrap">
                                        Modifier
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="bg-white rounded-lg shadow-sm p-12 text-center">
                    <div class="text-6xl mb-4">üìÖ</div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Aucune session cr√©√©e</h3>
                    <p class="text-gray-600 mb-6">Vous n'avez pas encore cr√©√© de session. Cr√©ez une randonn√©e pour commencer !</p>
                    <a href="{{ path('app_hike_new') }}" class="inline-block px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition">
                        Cr√©er une randonn√©e
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
